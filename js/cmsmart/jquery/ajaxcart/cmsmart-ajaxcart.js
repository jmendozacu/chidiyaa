jQuery.noConflict(),jQuery(function(a){"undefined"==typeof jQuery&&(jQuery={}),jQuery.ajaxcart={button:a("button.btn-cart[onclick^=setLocation]")};var t=a(window).width(),c=a(window).height(),i=a(cartlinkclass),s=(i.offset(),baseUrlAjax+"ajaxcart/index/index/id/"),e=baseUrlAjax+"ajaxcart/index/index/",n=baseUrlAjax+"checkout/cart/add/",o='<div id="ajopacity"></div>';function r(a){return a?("/"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a.split("/").pop()):""}a("body").append('<div id="ajaxcart" class="ajaxcart">'+o+'</div><div class="ajaxcartanimate"></div><a id="ajaxcartloading" class="progress-bar progress-bar-striped active"></a><div id="ajaxallct"><div id="ajaxcartmsg" class="ajaxcartmsg"><a title="Close" id="jQuery_ajaxcart_button_close"></a><div id="ajaxcartmsgc" class="ajaxcartmsgc"></div></div></div>');var l=a("#ajaxcartmsg"),d=a("#ajaxallct");d.click(function(t){a(t.target).is("#ajaxcartmsg, #ajaxcartmsg *")||d.hide()}),l.css("max-height",c+"px"),ajmsgc=a("#ajaxcartmsgc"),a(".ajaxcartbl").appendTo(a("#ajaxcart"));var x=a("#ajaxcartloading"),j=a("#ajaxscicon").size(),p=a("#ajaxscicon").offset();x.css("top",a(window).height()/2-x.height()/2+"px"),x.css("left",a(window).width()/2-x.width()/2+"px");var u=1;a("#ajaxscicon").append('<br/><div class="upajax">&nbsp;</div>'),i.after('<div class="upajax">&nbsp;</div>'),b("#product_addtocart_form");a(".upajax");var h=i.parent("ul.links li");i.mouseover(function(t){"block"==a("#ajaxcart").css("display")&&1==u||(a("#ajaxcart").css("position","absolute"),u=1,a(".upajax ").hide(),a(".upajax ",h).show(),a("#ajaxcart").width()+i.eq(0).offset().left>a(window).width()?a("#ajaxcart").css("right","10px"):a("#ajaxcart").css("left",i.eq(0).offset().left-110+"px"),a("#ajaxcart").css("top",i.eq(0).offset().top+a(this).height()+14+"px"),a("#ajaxcart").slideDown(500),!1)}),a("#jQuery_ajaxcart_button_close").click(function(a){d.hide()}),a("body").click(function(t){a(t.target).is("#ajaxcart, #ajaxcart *")||a(t.target).is("#ajaxscicon, #ajaxscicon *")||a(t.target).is(cartlinkclass)||(a(".upajax ").hide(),a("#ajaxcart").fadeOut(300))}),a("#ajaxscicon").click(function(i){var s=a(this).data("clicks");if(s)a("#ajaxcart").fadeOut(300),a(".upajax ").hide();else{var e=a("#ajaxscicon").offset().top;if("block"==a("#ajaxcart").css("display")&&2==u)return;u=2,a(".upajax ").hide(),a(".upajax ",a(this)).show();var n=a(this).offset(),o=a("#ajaxcart");o.fadeOut(1),n.left<t/2?o.css("left",n.left+"px"):o.css("left",n.left+a(this).width()-o.width()+5+"px"),e<c/2?o.css("top",p.top+a(this).height()+14+"px"):o.css("top",p.top-o.height()-15+"px"),a("#ajaxcart").css("position","absolute"),o.fadeIn(400)}a(this).data("clicks",!s)}),jQuery.ajaxcart.button.each(function(){var t=a(this).attr("onclick").replace("setLocation('","").replace("')","").replace("?options=cart","");a(this).attr("data",t),t=t.split("form_key").shift(),a(this).attr("onclick","return false;"),a(this).click(function(c){return a(".ajaxcartanimate").css("top",a(this).offset().top+"px"),a(".ajaxcartanimate").css("left",c.clientX+"px"),a(this).parentsUntil("li.item").parent().find("img").eq(0).clone().appendTo(a(".ajaxcartanimate").html("")),ajpath=r(t),x.css("display","block"),x.css("top",c.clientY-x.height()/2+"px"),x.css("left",c.clientX-x.width()/2+"px"),a.ajax({url:s+encodeURIComponent(ajpath),cache:!1}).done(function(t){x.css("display","none");var c=a.parseJSON(t);c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxcartmsg?(ajmsgc.html(c.ajaxcartmsg),d.css("display","block"),g(l),b("#product_addtocart_form")):(c.ajaxcontinue&&(ajmsgc.html(c.ajaxcontinue),d.css("display","block"),d.addClass("ajaxcontinue"),g(l),a("button.closemsg").click(function(){d.hide()}),d.delay(4500).fadeOut(200,function(){d.removeClass("ajaxcontinue")})),f(),v())}),!1})});var m=a("form#wishlist-view-form");function f(){a("button.btajaxqtyall").click(function(t){var c="";a("input.ajaxqty").each(function(){c+=a(this).attr("name")+"="+a(this).val()+"&"}),x.css("display","block"),x.css("top",t.clientY-x.height()/2+"px"),x.css("left",t.clientX-100-x.width()/2+"px"),ajop=a("#ajopacity"),ajop.css("display","block"),a.ajax({url:baseUrlAjax+"ajaxcart/index/index/delete/udaj/",type:"POST",data:c,cache:!1}).done(function(t){x.css("display","none"),d.css("display","none");var c=a.parseJSON(t);c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),ajop.css("display","none"),f(),y()})}),a("button.btajaxqty").click(function(t){var c=a(this).prev();x.css("top",t.clientY-x.height()/2+"px"),x.css("left",a("#ajaxcart").offset().left+a("#ajaxcart").width()/2-x.width()/2+"px"),x.css("display","block"),ajop=a("#ajopacity"),ajop.css("display","block"),a.ajax({url:baseUrlAjax+"ajaxcart/index/index/delete/udaj/",type:"POST",data:c.attr("name")+"="+c.val(),cache:!1}).done(function(t){x.css("display","none"),d.css("display","none");var c=a.parseJSON(t);c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),ajop.css("display","none"),f(),y()})}),a("a.ajrmbt").click(function(){return k(a(this).attr("href")),!1}),a("button.ajetall").click(function(){return k(a(this).val()),!1})}function b(t){var c=a(t);c&&"undefined"!=typeof productAddToCartForm&&(productAddToCartForm.submit=function(a,t){if(this.validator.validate()){var c=this.form,i=c.action;t&&(c.action=t);this.form.action=i,a&&"undefined"!=a&&(a.disabled=!1)}}.bind(productAddToCartForm),c.attr("action",c.attr("action").replace(n,e)),a("button",c).click(function(t){var s=!0,n=a("#super-product-table");if(n.size()>0){var r=!0;if(a("input",n).each(function(t,c){a(this).val()>0?r=!1:a(this).addClass("validation-failed")}),r)return}return a(".required-entry",c).each(function(){a(this).val()||(s=!1)}),s&&(a(".ajaxcartanimate").css("top",a(this).offset().top+"px"),a(".ajaxcartanimate").css("left",t.clientX+"px"),a("img#image").eq(0).clone().appendTo(a(".ajaxcartanimate").html("")),x.css("display","block"),x.css("top",t.clientY-x.height()/2+"px"),x.css("left",t.clientX-x.width()/2+"px"),a.ajax({url:e+"?"+c.serialize(),cache:!1}).done(function(t){x.css("display","none"),d.css("display","none");var c=a.parseJSON(t);c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxcontinue&&(ajmsgc.html(c.ajaxcontinue),d.css("display","block"),d.addClass("ajaxcontinue"),g(l),a("button.closemsg").click(function(){d.hide()}),d.delay(4500).fadeOut(200,function(){d.removeClass("ajaxcontinue")})),f(),v()})),!1}),c.submit(function(){return!1}))}function y(){0==j&&a("#ajaxcart").show(300).delay(2500).fadeOut(200)}function v(){0==j&&(i.mouseover(),a("#ajaxcart").delay(2500).fadeOut(200))}function g(t){t.css("top",(a(window).height()-t.height())/2+"px"),t.css("left",(a(window).width()-t.width())/2+"px")}function k(t){return x.css("display","block"),ajop=a("#ajopacity"),ajop.css("display","block"),a.ajax({url:t,cache:!1}).done(function(t){x.css("display","none"),d.css("display","none");var c=a.parseJSON(t);c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),!1!==c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),ajop.css("display","none"),f()}),!1}m.size()>0&&(a("button.btn-cart",m).each(function(){a(this).attr("onclick","")}),a("button.btn-cart",m).click(function(t){a(".ajaxcartanimate").css("top",a(this).offset().top+"px"),a(".ajaxcartanimate").css("left",t.clientX+"px"),pritem=a(this).parentsUntil("tr").parent(),pritem.find("a.product-image img").eq(0).clone().appendTo(a(".ajaxcartanimate").html("")),lk=a("a",pritem).eq(0),ajpath=r(lk.attr("href"))+"?qty="+a("input.qty",pritem).eq(0).val(),x.css("display","block"),x.css("top",t.clientY-x.height()/2+"px"),x.css("left",t.clientX-x.width()/2+"px"),a.ajax({url:s+ajpath,cache:!1}).done(function(t){x.css("display","none");var c=a.parseJSON(t);c.ajaxSummaryCount&&i.html(c.ajaxSummaryCount),c.ajaxCountItem&&a("div#ajaxscicon > span").html(c.ajaxCountItem),c.ajaxsidebar&&a(".sidebar .block-cart").html(c.ajaxsidebar),c.ajaxcart&&a("#ajaxcart").html(o+c.ajaxcart),c.ajaxcartmsg?(ajmsgc.html(c.ajaxcartmsg),d.css("display","block"),g(l),b("#product_addtocart_form")):(c.ajaxcontinue&&(ajmsgc.html(c.ajaxcontinue),d.css("display","block"),d.addClass("ajaxcontinue"),g(l),a("button.closemsg").click(function(){d.hide()}),d.delay(4500).fadeOut(200,function(){d.removeClass("ajaxcontinue")})),f(),v())})})),f()});
